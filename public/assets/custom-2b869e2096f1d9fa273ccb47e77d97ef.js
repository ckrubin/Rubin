function uuid(){var e=function(){var e,t="89ab",i=[];for(e=0;36>e;e+=1)i[e]=(16*Math.random()|0).toString(16);return i[8]=i[13]=i[18]=i[23]="-",i[14]="4",i[19]=t.charAt(4*Math.random()|0),i.join("")}();return{toString:function(){return e},valueOf:function(){return e}}}jQuery(document).ready(function(e){function t(){return"chrome"===e.browser.name}function i(){var t=e.browser.name,i=e.browser.versionNumber;return"msie"===t&&10===i}function a(){return"opera"===e.browser.name}function n(t,i){function a(t,i){var a=e(t.currentTarget).attr("id");"left"==i&&e("#"+a+"-next").trigger("click"),"right"==i&&e("#"+a+"-prev").trigger("click")}t.each(function(t){var a=e(this),n=i&&a.data("initInvoked");if(!n){a.data("initInvoked","true");var r="entry-slider-"+t;a.attr("id",r);var o=r+"-prev",s=r+"-next";if("false"===a.data("enable"))return;a.css("height",a.children("li:first").height());var d=a.children("li")[0],c=a.children("li")[a.children("li").length-1];a.children("li").length>1&&0==a.parent().find("#"+o).length&&a.parent().append('<div class="entry-slider-nav"><a id="'+o+'" class="prev">Prev</a><a id="'+s+'" class="next">Next</a></div>'),a.cycle({onPrevNextEvent:function(t,i,a){e(a).parent().data("dir",t?"next":"prev")},before:function(t,i,a,n){var r=e(this),o=r.closest("ul").attr("id");if(r.parent().stop().animate({height:r.height()},a.speed),a.nowrap){var s=e("#"+o+"-prev"),l=e("#"+o+"-next");d!=i||s.hasClass("disabled")?s.removeClass("disabled"):s.addClass("disabled"),c!=i||l.hasClass("disabled")?l.removeClass("disabled"):l.addClass("disabled")}},containerResize:!1,pauseOnPagerHover:!0,nowrap:!1,easing:"easeInOutExpo",fx:"scrollHorizontal",speed:600,timeout:0,fit:!0,width:"100%",pause:!0,slideResize:!0,slideExpr:"li",prev:"#"+o,next:"#"+s})}}),Modernizr.touch&&e().swipe&&t.each(function(){var t=e(this),n=i&&t.data("swipeInvoked");n||(t.data("swipeInvoked","true"),t.swipe({click:function(t,i){e(i).trigger("click")},swipeLeft:a,swipeRight:a,allowPageScroll:"auto"}))})}function r(t){if(t)var i=window.setTimeout(function(){window.clearTimeout(i),n(e(".entry-slider > ul"),t)},100);else n(e(".entry-slider > ul"),t)}function o(t){t.each(function(){var t=e(this);t.css("height",t.children("li:first").height())})}function s(){var t=e(".entry-slider > ul > li> a > img"),i=0,a=[];if(t.each(function(){this.complete||void 0==this.complete||(a.push(this),i++)}),0==i)r(!0);else{var n=!1,o=0;e(a).bind("load",function(){o++,o===i&&(n||(n=!0,r(!0)))});var s=window.setTimeout(function(){window.clearTimeout(s),e(a).each(function(){(this.complete||void 0===this.complete)&&e(this).trigger("load")})},50)}}function d(t,i){var a=e(t.currentTarget).parents().eq(2);"left"==i.toLowerCase()&&a.find(".jcarousel-next").trigger("click"),"right"==i.toLowerCase()&&a.find(".jcarousel-prev").trigger("click")}function c(t){var i=1e5;t.data("scroll")&&(i=parseInt(t.data("scroll")));var a=e(window).width();return 480>a?1:768>a?Math.min(2,i):960>a?Math.min(3,i):Math.min(4,i)}function l(e){e.data("resize")&&e.css("left","0")}function u(t,i){t.each(function(t){var i=e(this),a=c(i);i.jcarousel({scroll:a,animation:"normal",easing:"easeOutCubic",auto:i.data("auto")?parseInt(i.data("auto")):0,wrap:"last",itemFallbackDimension:220,itemVisibleInCallback:function(){l(i),l(i)}})}),i&&Modernizr.touch&&e().swipe&&t.swipe({click:function(t,i){e(i).trigger("click")},swipeLeft:d,swipeRight:d,allowPageScroll:"auto"})}function f(t){t.each(function(){var t=e(this),i=t.children("li"),a=i.first().outerWidth(!0),n=i.length*a+100;if(t.width()!==n){t.css("width",n).data("resize","true"),u(t,!1),t.jcarousel("scroll",1);var r=window.setTimeout(function(){window.clearTimeout(r),t.data("resize",null)},600)}})}function h(t){t.each(function(){var t=uuid().toString(),i=uuid().toString(),a=e(this),n=a.parent();n.attr("id",i),a.attr("id",t),a.jcarousel({auto:a.data("auto")?parseInt(a.data("auto")):0,scroll:1,visible:1,wrap:"last"}),e("#"+i+" .jcarousel-next").attr("id",t+"-next"),e("#"+i+" .jcarousel-prev").attr("id",t+"-prev")}),Modernizr.touch&&e().swipe&&t.swipe({click:function(t,i){e(i).trigger("click")},swipeLeft:d,swipeRight:d,allowPageScroll:"auto"})}function v(e){e?Q.fadeIn(500):Q.fadeOut(500)}function p(t){if(Q.length>0){var i=e("#navbar").width()-e("#nav").outerWidth(!0),a=Q.outerWidth(!0)+B.outerWidth(!0),n="true"==Q.data("tiny");a>=i?n||(Q.hasClass("small-search")||Q.addClass("small-search"),Q.data("tiny","true"),v(!1),B.bind("click",W)):(t&&v(!0),n&&(Q.removeClass("small-search"),Q.data("tiny","false"),v(!0),B.unbind("click",W)))}}function w(e){if("s"!=e.id&&"search-submit"!=e.id){var t="none"!=Q.css("display"),i="true"==Q.data("tiny");t&&i&&v(!1)}}function m(t,i){for(var a=!0,n=ddlevelsmenu.topitems.nav,r=0;r<n.length;r++)e(n[r].parentNode).has(i).length>0&&(a=!1);if(a)for(n=ddlevelsmenu.subuls.nav,r=0;r<n.length;r++)e(n[r]).has(i).length>0&&(a=!1);if(a)for(n=ddlevelsmenu.subuls.nav,r=0;r<n.length;r++)ddlevelsmenu.hidemenu(n[r].parentNode)}function g(){e().polyglotLanguageSwitcher&&(F=U.polyglotLanguageSwitcher({effect:"fade",testMode:!0}))}function y(e){var t=U.find(e).length;F&&0==t&&F.close()}function b(t){function i(e,t){"left"==t.toLowerCase()&&a.trigger("click"),"right"==t.toLowerCase()&&n.trigger("click")}t.flexslider({pauseOnHover:!0,controlsContainer:".flex-container",slideshowSpeed:7e3,animationSpeed:600});var a=t.parent().find(".flex-direction-nav .next"),n=t.parent().find(".flex-direction-nav .prev");Modernizr.touch&&e().swipe&&t.swipe({click:function(t,i){e(i).trigger("click")},swipeLeft:i,swipeRight:i,allowPageScroll:"auto"})}function x(){e().fancybox&&e(".fancybox").fancybox({openEffect:"fade",closeEffect:"fade",nextEffect:"fade",prevEffect:"fade",arrows:!Modernizr.touch,helpers:{title:{type:"inside"},buttons:{},media:{}},beforeLoad:function(){this.title="Image "+(this.index+1)+" of "+this.group.length+(this.title?" - "+this.title:"")}})}function T(t){i()&&(e("video").each(function(){this.player.pause()}),e("audio").each(function(){this.player.pause()})),e("#filter li").removeClass("active");var a=e(t).attr("class");if(e(t).parent().addClass("active"),"all"==a)var n=K.find("li.entry");else var n=K.find("li[data-type~="+a+"]");J.quicksand(n,X,function(){x(),r(!1),S(),z()})}function _(){e("#filter li a").click(function(e){T(this)}),e("#filter li a").each(function(){var t=e(this),i=window.location.href,a=i.indexOf("filter=");if(a>0){var n=i.substring(a+7,i.length);if("#"+n==t.attr("href"))var r=window.setTimeout(function(){window.clearTimeout(r),T(t)},200)}})}function j(e){e.wrap("<div class='table-wrapper' />");var t=e.clone();t.find("td:not(:first-child), th:not(:first-child)").css("display","none"),t.removeClass("responsive"),e.closest(".table-wrapper").append(t),t.wrap("<div class='pinned' />"),e.wrap("<div class='scrollable' />")}function k(e){e.closest(".table-wrapper").find(".pinned").remove(),e.unwrap(),e.unwrap()}function S(){try{e(".entry-video").fitVids()}catch(t){console.log(t)}}function z(){de=0;var t=e("video"),i=e("audio");se=t.length+i.length,C(t),C(i)}function C(e){e&&e.length>0&&e.mediaelementplayer({features:["playpause","progress","current","duration","volume","fullscreen"],hideVolumeOnTouchDevices:!0,success:function(e,t,i){de++,de==se&&(M(),I())}})}function O(t){if(0==t.closest(".large-video").length){var i=e(".project-carousel > li, .post-carousel > li, ul.portfolio-grid > li.one-fourth").width();if(i){if(220==i)return 220;if(200==i)return 200;if(172==i)return 172}}return-1}function M(){e(".mejs-video").each(function(t){var i=e(this),a=e(window).width(),n=i.width(),r=i.height(),o=n;458>=a?o=300:746>=a?o=420:938>=a&&(o=557);var s=O(i);-1!=s&&(o=s);var d=Math.round(o/n*r);n!=o&&(i.find(".mejs-layer").css({width:o,height:d}),i.css({width:o,height:d}));var c="videoMejsTime"+t,l="videoMejsVolumeSlider"+t;if(200>=o){var u=i.find(".mejs-volume-slider"),f=i.find(".mejs-time");f.length>0&&!i.data(c)&&i.data(c,f.detach()),u.length>0&&!i.data(l)&&i.data(l,u.detach())}else{if(i.data(c)){var h=i.find(".mejs-time-rail");h.after(i.data(c)),i.removeData(c)}if(i.data(l)){var v=i.find(".mejs-volume-button");v.append(i.data(l)),i.removeData(l)}}})}function I(){e(".mejs-audio").each(function(t){var i=e(this),a=e(window).width(),n=i.width(),r=n;458>=a?r=300:746>=a?r=420:938>=a&&(r=557);var o=O(i);-1!=o&&(r=o),n!=r&&(i.find(".mejs-layer").css({width:r}),i.css({width:r}));var s="audioMejsTime"+t,d="audioMejsHorizontalVolumeSlider"+t;if(220>=r){var c=i.find(".mejs-horizontal-volume-slider");if(c.length>0&&!i.data(d)){var l=c.detach();i.data(d,l)}}else if(i.data(d)){var u=i.find(".mejs-controls");u.append(i.data(d)),i.removeData(d)}if(200>=r){var f=i.find(".mejs-time");f.length>0&&!i.data(s)&&i.data(s,f.detach())}else if(i.data(s)){var h=i.find(".mejs-time-rail");h.after(i.data(s)),i.removeData(s)}})}function L(){he.length>0&&he.each(function(){var t=e(this).width(),i=Math.round(.425*t);e(this).height(i)})}function N(){var t=e("body"),i=e("#wrap"),a=e("#content");a.css("min-height",e(window).outerHeight(!0)-(t.outerHeight(!0)-t.height())-(i.outerHeight(!0)-i.height())-e("#header").outerHeight(!0)-(a.outerHeight(!0)-a.height())-e("#footer").outerHeight(!0))}if(Modernizr.touch,t())try{var A=e("#nav"),H=A.find(":first :first :first"),P=H.attr("rel");"undefined"!=typeof P&&P||(P=H.attr("data-rel")),A.find(".ddsubmenustyle").each(function(){var t=e(this).children()[0];"li"===t.tagName.toLowerCase()&&(t=e(t).parent());var i=t.attr("id");i!==P&&e(this).css("margin-left","-1px")})}catch(E){console.log(E)}if(a()&&e(".flexslider .slides > li").each(function(){e(this).css("overflow","hidden")}),e().cycle){var D=e(".entry-slider > ul");e.fn.cycle.transitions.scrollHorizontal=function(t,i,a){t.css("overflow","hidden"),a.before.push(e.fn.cycle.commonReset);var n=t.width();a.cssFirst.left=0,a.cssBefore.left=n,a.cssBefore.top=0,a.animIn.left=0,a.animOut.left=0-n,"prev"===t.data("dir")&&(a.cssBefore.left=-n,a.animOut.left=n)},s(),e(window).on("resize",function(){var e=window.setTimeout(function(){window.clearTimeout(e),o(D)},30)})}if(e().jcarousel){var R=e(".iconbox-carousel, .project-carousel, .post-carousel"),V=e(".testimonial-carousel");u(R,!0),h(V),e(window).on("resize",function(){var e=window.setTimeout(function(){window.clearTimeout(e),f(R)},30)})}var B=e("#search-submit"),Q=e("#s");B.length>0&&B.bind("click",function(t){return""!=e.trim(Q.val())}),e().tinyNav&&(e("html").addClass("js"),e("#navlist").tinyNav());var W=function(){var t="none"==Q.css("display");return t?(v(!0),!1):""==e.trim(Q.val())?(v(!1),!1):!0};e(window).on("resize",function(){var e=window.setTimeout(function(){window.clearTimeout(e),p(!1)},100)});var q=window.setTimeout(function(){window.clearTimeout(q),p(!0)},500);Modernizr.touch?e(document).on("touchstart",function(e){var t=e.target;w(t),y(t),m(e,t)}):e(document).click(function(e){m(e,""),w(e.target)});var F,U=e("#polyglotLanguageSwitcher");if(g(),e().flexslider){var G=e(".flexslider");G.length>0&&G.each(function(){b(e(this))})}if(e().UItoTop&&e().UItoTop({scrollSpeed:600}),x(),e().quicksand){var J=(e("#filter li.active a").attr("class"),e("ul#gallery")),K=J.clone(),X={duration:500,easing:"easeInQuad"};_()}e("iframe").each(function(){var t=e(this).attr("src"),i="wmode=transparent";if(t&&-1!=t.indexOf("?")){var a=t.split("?"),n=a[1],r=a[0];e(this).attr("src",r+"?"+i+"&"+n)}else e(this).attr("src",t+"?"+i)}),e(".notification-close-info").click(function(){return e(this).parent().fadeOut("fast"),!1}),e(".notification-close-success").click(function(){return e(this).parent().fadeOut("fast"),!1}),e(".notification-close-warning").click(function(){return e(this).parent().fadeOut("fast"),!1}),e(".notification-close-error").click(function(){return e(this).parent().fadeOut("fast"),!1}),e().tabs&&e(".tabs").each(function(){var t={},i=e(this).data("active");i&&e.isNumeric(i)&&(t.active=parseInt(i)-1);var a=e(this).data("heightStyle");a&&(t.heightStyle=a);var n=e(this).data("disabled");n&&(n=e.isNumeric(n)?[parseInt(n)-1]:e.map(n.split(","),function(e){return parseInt(e,10)-1}),t.disabled=n),e(this).tabs(t)}),e().accordion&&(e(".toggle").each(function(){var t=e(this).data("id");t=t&&"opened"===t?!0:e(this).data("active"),t=!t||"true"!==t&&t!==!0?!1:0;var i=e(this).data("heightStyle");i||(i="content");var a=e(this).data("disabled");a=a&&("true"===a||a===!0),e(this).accordion({header:".toggle-title",collapsible:!0,heightStyle:i,disabled:a,active:t})}),e(".accordion").each(function(){var t=e(this).data("heightStyle");t||(t="content");var i=e(this).data("active");i=i&&e.isNumeric(i)?parseInt(i)-1:!1;var a=e(this).data("disabled");a=a&&("true"===a||a===!0),e(this).accordion({header:".accordion-title",collapsible:!0,heightStyle:t,disabled:a,active:i})})),e().validate&&e("#comment-form").validate();var Y=e("#contact-form");if(Y&&Y.length>0){var Z=7e3,$=Y.find("#submit");$.bind("click",function(t){function i(){var i="timestamp="+t.timeStamp;return Y.find(":input").each(function(){var t=e(this),a=!0;if(t.is(":checkbox")&&!t.is(":checked")&&(a=!1),a){var n=t.attr("name"),r=e.trim(t.val());r.length>0&&(i+="&"+n+"="+r)}}),i}function a(){Y.find(":input").each(function(){var t=e(this),i=t.prop("nodeName").toLowerCase();if("select"==i)t.prop("selectedIndex",0);else if(t.is(":checkbox"))t.attr("checked",t.prop("defaultChecked"));else{var a=t.prop("defaultValue");a?t.val(a):t.val("")}})}return Y.valid()&&($.attr("disabled","disabled"),jQuery.ajax({type:"POST",url:"contact-submit.php",data:i(),statusCode:{200:function(){var t=e("#contact-notification-box-success");if(t.css("display",""),$.removeAttr("disabled",""),a(),Z>0)var i=window.setTimeout(function(){window.clearTimeout(i),t.fadeOut("slow")},Z)},500:function(t,i,a){var n=e("#contact-notification-box-error"),r=e("#contact-notification-box-error-msg"),o=t.responseText;if(o&&0!=o.length||(o=r.data("default-msg")),r.text(o),n.css("display",""),$.removeAttr("disabled"),Z>0)var s=window.setTimeout(function(){window.clearTimeout(s),n.fadeOut("slow")},Z)}}})),!1})}e().validate&&e("#newsletter-form, #send-newsletter-form").validate();var ee=e("#newsletter-wrap"),te=e("#newsletter-form");if(te&&te.length>0){var ie=5e3,ae=te.find("#subscribe"),ne=te.find("#newsletter");ae.on("click",function(e){return te.valid()&&(ae.attr("disabled","disabled"),jQuery.ajax({type:"POST",url:"newsletter.php",data:{email:ne.val()},statusCode:{200:function(){var e=ee.find(".notification-box-success");if(e.css("display",""),ae.removeAttr("disabled",""),ne.val(""),ie>0)var t=window.setTimeout(function(){window.clearTimeout(t),e.fadeOut("slow")},ie)},500:function(e,t,i){var a=e.responseText,n=ee.find(".notification-box-error");if(n.find("p").html(a),n.css("display",""),ae.removeAttr("disabled"),ie>0)var r=window.setTimeout(function(){window.clearTimeout(r),n.fadeOut("slow")},ie)}}})),!1})}var re=!1,oe=function(){return e(window).width()<767&&!re?(re=!0,e("table.responsive").each(function(t,i){j(e(i))}),!0):void(re&&e(window).width()>767&&(re=!1,e("table.responsive").each(function(t,i){k(e(i))})))};if(e(window).load(oe),e(window).bind("resize",oe),e().fitVids&&S(),e().mediaelementplayer){var se=0,de=0;e(window).on("resize",function(){M(),I()}),z()}if(e().tweet){for(var ce="",le=document.getElementsByTagName("script"),ue=0;ue<le.length;ue++){var fe=le[ue].src;fe&&fe.length>0&&fe.indexOf("/js/custom.js")>=0&&(ce=fe.replace("/js/custom.js","/twitter-proxy.php"))}e(".tweet").each(function(){try{var t=e(this),i={username:"ckrubin",twitter_api_url:ce,join_text:!1,avatar_size:!1,count:3,view_text:"\u0441\u043c\u043e\u0442\u0440\u0435\u0442\u044c \u043d\u0430 twitter.com",just_now_text:"\u0441\u0435\u0439\u0447\u0430\u0441",seconds_ago_text:"%d \u0441\u0435\u043a\u0443\u043d\u0434 \u043d\u0430\u0437\u0430\u0434",a_minutes_ago_text:"\u043c\u0438\u043d\u0443\u0442\u0443 \u043d\u0430\u0437\u0430\u0434",minutes_ago_text:"%d \u043c\u0438\u043d\u0443\u0442 \u043d\u0430\u0437\u0430\u0434",a_hours_ago_text:"\u0447\u0430\u0441 \u043d\u0430\u0437\u0430\u0434",hours_ago_text:"%d \u0447\u0430\u0441\u043e\u0432 \u043d\u0430\u0437\u0430\u0434",a_day_ago_text:"\u0432\u0447\u0435\u0440\u0430",days_ago_text:"%d \u0434\u043d\u0435\u0439 \u043d\u0430\u0437\u0430\u0434",template:"{avatar}{text}{join}{time}"},a=t.data("username");"undefined"!=typeof a&&(i.username=a);var n=t.data("joinText");"undefined"!=typeof n&&(i.join_text=n);var r=t.data("avatarSize");"undefined"!=typeof r&&(i.avatar_size=r);var o=t.data("count");"undefined"!=typeof o&&(i.count=o);var s=t.data("retweets");"undefined"!=typeof s&&(i.retweets=s);var d=t.data("viewText");"undefined"!=typeof d&&(i.view_text=d);var c=t.data("justNowText");"undefined"!=typeof c&&(i.just_now_text=c);var l=t.data("secondsAgoText");"undefined"!=typeof l&&(i.seconds_ago_text=l);var u=t.data("aMinutesAgoText");"undefined"!=typeof u&&(i.a_minutes_ago_text=u);var f=t.data("minutesAgoText");"undefined"!=typeof f&&(i.minutes_ago_text=f);var h=t.data("aHoursAgoText");"undefined"!=typeof h&&(i.a_hours_ago_text=h);var v=t.data("hoursAgoText");"undefined"!=typeof v&&(i.hours_ago_text=v);var p=t.data("aDayAgoText");"undefined"!=typeof p&&(i.a_day_ago_text=p);var w=t.data("daysAgoText");"undefined"!=typeof w&&(i.days_ago_text=w);var m=t.data("template");"undefined"!=typeof m&&(i.template=m),t.tweet(i)}catch(g){console.log(g)}})}var he=e("#map, .map");e().gMap&&he.length>0&&he.each(function(){var t=e(this).data("lat"),i=e(this).data("lng"),a=e(this).data("address"),n=e(this).data("zoom"),r={};a?r.address=a:(r.latitude=t,r.longitude=i),e(this).gMap({markers:[r],zoom:n})}),L(),N(),e(window).on("resize",function(){var e=window.setTimeout(function(){window.clearTimeout(e),N(),L()},30)});var ve=window.location.href.indexOf("#nosw")<0;if(e().styleSwitcher&&ve){var pe=e().styleSwitcher();pe.loadStyleSwitcher(),pe.applySettings()}});